{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión ISPI Oliveros</title>
    
    <link rel="icon" href="{% static 'img/favicon.jpeg' %}" type="image/png">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>

    <!-- ================== HEADER ================== -->
    <header>
        <div class="header-container">
            <a href="{% if user.is_authenticated %}{% url 'dashboard' %}{% else %}{% url 'home' %}{% endif %}" class="logo-link">
                <img src="{% static 'img/logo-FHO.png' %}" alt="Logo ISPI Oliveros" class="logo">
            </a>

            <!-- Menú de Navegación -->
            <nav>
                {% if user.is_authenticated %}
                    <a href="{% url 'dashboard' %}" {% if request.resolver_match.url_name == 'dashboard' %}class="active"{% endif %}>Dashboard</a>
                    
                    {% if user.is_superuser or user.perfil_administrador %}
                        <a href="{% url 'alumnos:alumno_list' %}" {% if request.resolver_match.app_name == 'alumnos' %}class="active"{% endif %}>Alumnos</a>
                        <a href="{% url 'academico:carrera_list' %}" {% if request.resolver_match.app_name == 'academico' %}class="active"{% endif %}>Académico</a> 
                        <a href="{% url 'finanzas:gestion_financiera' %}" {% if request.resolver_match.app_name == 'finanzas' %}class="active"{% endif %}>Finanzas</a> 
                    {% endif %} 

                    {% if user.perfil_docente %}
                        {# Enlaces para Docentes aquí si los necesitas en el futuro #}
                    {% endif %}
                    
                    <div class="user-menu">
                        <span>| Hola, {{ user.first_name|default:user.username }}</span>
                        <form action="{% url 'logout' %}" method="post">
                            {% csrf_token %}
                            <button type="submit" class="nav-button">Cerrar Sesión</button>
                        </form>
                    </div>

                {% else %}
                    <a href="{% url 'login' %}">Iniciar Sesión</a>
                    <a href="{% url 'register' %}">Regístrate</a>
                {% endif %}
            </nav>
        </div>
    </header>

    <!-- ================== CONTENEDOR DE MENSAJES ================== -->
    {% if messages %}
        <div class="messages-container">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <!-- ================== CONTENIDO PRINCIPAL DE CADA PÁGINA ================== -->
    <main>
        {# --- ESTE ES EL ÚNICO LUGAR DONDE DEBE ESTAR block content --- #}
        {% block content %}{% endblock %}
    </main>

    <!-- ================== FOOTER ================== -->
    <footer>
        <div class="footer-container">
            <div class="footer-left">
                &copy; {% now "Y" %} Fundación Hospital Oliveros - Todos los derechos reservados.
            </div>
            <div class="footer-right">
                Sistema de Gestión Académica v1.0
            </div>
        </div>
    </footer>

</body>
</html>